{"version":3,"names":["defineComponent","ref","watch","h","DashboardPlugin","Uppy","useUppy","name","props","uppy","type","required","Object","open","Boolean","setup","containerRef","pluginRef","propsRef","onMount","options","id","inline","target","value","use","getPlugin","current","old","openModal","closeModal"],"sources":["dashboard-modal.ts"],"sourcesContent":["import { defineComponent, ref, watch, h, type PropType } from 'vue'\nimport DashboardPlugin, { type DashboardOptions } from '@uppy/dashboard'\nimport { Uppy } from '@uppy/core'\nimport type { Meta, Body } from '@uppy/core'\nimport useUppy from './useUppy.js'\n\ntype DashboardModalOptions<M extends Meta, B extends Body> = Omit<\n  DashboardOptions<M, B> & { inline: false },\n  'inline'\n>\n\nexport default defineComponent({\n  name: 'DashboardModal',\n  props: {\n    uppy: {\n      type: Uppy<any, any>,\n      required: true,\n    },\n    props: {\n      type: Object as PropType<DashboardModalOptions<any, any>>,\n    },\n    open: {\n      type: Boolean,\n      required: true,\n    },\n  },\n  setup(props) {\n    const containerRef = ref<string>()\n    const pluginRef = ref<DashboardPlugin<any, any>>()\n    const propsRef = ref(props.props)\n    const onMount = () => {\n      const { uppy } = props\n      const options = {\n        id: 'DashboardModal',\n        inline: false,\n        ...props.props,\n        target: containerRef.value,\n      }\n      uppy.use(DashboardPlugin, options)\n      pluginRef.value = uppy.getPlugin(options.id) as DashboardPlugin<any, any>\n    }\n\n    useUppy(onMount, pluginRef, props.uppy, propsRef)\n\n    watch(\n      () => props.open,\n      (current, old) => {\n        if (current && !old) {\n          pluginRef.value!.openModal()\n        }\n        if (!current && old) {\n          pluginRef.value!.closeModal()\n        }\n      },\n    )\n\n    return () =>\n      h('div', {\n        ref: containerRef,\n      })\n  },\n})\n"],"mappings":"AAAA,SAASA,eAAe,EAAEC,GAAG,EAAEC,KAAK,EAAEC,CAAC,QAAuB,KAAK;AACnE,OAAOC,eAAe,MAAiC,iBAAiB;AACxE,SAASC,IAAI,QAAQ,YAAY;AAEjC,OAAOC,OAAO,MAAM,cAAc;AAOlC,eAAeN,eAAe,CAAC;EAC7BO,IAAI,EAAE,gBAAgB;EACtBC,KAAK,EAAE;IACLC,IAAI,EAAE;MACJC,IAAI,EAAEL,IAAc;MACpBM,QAAQ,EAAE;IACZ,CAAC;IACDH,KAAK,EAAE;MACLE,IAAI,EAAEE;IACR,CAAC;IACDC,IAAI,EAAE;MACJH,IAAI,EAAEI,OAAO;MACbH,QAAQ,EAAE;IACZ;EACF,CAAC;EACDI,KAAKA,CAACP,KAAK,EAAE;IACX,MAAMQ,YAAY,GAAGf,GAAG,CAAS,CAAC;IAClC,MAAMgB,SAAS,GAAGhB,GAAG,CAA4B,CAAC;IAClD,MAAMiB,QAAQ,GAAGjB,GAAG,CAACO,KAAK,CAACA,KAAK,CAAC;IACjC,MAAMW,OAAO,GAAGA,CAAA,KAAM;MACpB,MAAM;QAAEV;MAAK,CAAC,GAAGD,KAAK;MACtB,MAAMY,OAAO,GAAG;QACdC,EAAE,EAAE,gBAAgB;QACpBC,MAAM,EAAE,KAAK;QACb,GAAGd,KAAK,CAACA,KAAK;QACde,MAAM,EAAEP,YAAY,CAACQ;MACvB,CAAC;MACDf,IAAI,CAACgB,GAAG,CAACrB,eAAe,EAAEgB,OAAO,CAAC;MAClCH,SAAS,CAACO,KAAK,GAAGf,IAAI,CAACiB,SAAS,CAACN,OAAO,CAACC,EAAE,CAA8B;IAC3E,CAAC;IAEDf,OAAO,CAACa,OAAO,EAAEF,SAAS,EAAET,KAAK,CAACC,IAAI,EAAES,QAAQ,CAAC;IAEjDhB,KAAK,CACH,MAAMM,KAAK,CAACK,IAAI,EAChB,CAACc,OAAO,EAAEC,GAAG,KAAK;MAChB,IAAID,OAAO,IAAI,CAACC,GAAG,EAAE;QACnBX,SAAS,CAACO,KAAK,CAAEK,SAAS,CAAC,CAAC;MAC9B;MACA,IAAI,CAACF,OAAO,IAAIC,GAAG,EAAE;QACnBX,SAAS,CAACO,KAAK,CAAEM,UAAU,CAAC,CAAC;MAC/B;IACF,CACF,CAAC;IAED,OAAO,MACL3B,CAAC,CAAC,KAAK,EAAE;MACPF,GAAG,EAAEe;IACP,CAAC,CAAC;EACN;AACF,CAAC,CAAC","ignoreList":[]}